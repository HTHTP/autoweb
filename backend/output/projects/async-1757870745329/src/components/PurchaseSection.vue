<template><div class="purchase-section"><div class="quantity-selector"><button class="quantity-btn" @click="decreaseQuantity" :disabled="quantity <= 1">-</button><input type="number" v-model.number="quantity" min="1" max="stock" class="quantity-input" @change="handleQuantityChange"/><button class="quantity-btn" @click="increaseQuantity" :disabled="quantity >= stock">+</button></div><div class="action-buttons"><el-button type="primary" size="large" class="add-to-cart" @click="handleAddToCart">加入购物车</el-button><el-button type="danger" size="large" class="buy-now" @click="handleBuyNow">立即购买</el-button></div></div></template><script setup>import { defineProps, defineEmits, ref, watch } from 'vue';const props = defineProps({price: {type: Number,required: true},quantity: {type: Number,required: true},selectedOptions: {type: Object,required: true},stock: {type: Number,required: true}});const emit = defineEmits(['update-quantity', 'add-to-cart', 'buy-now']);const quantity = ref(props.quantity);watch(() => props.quantity, (newVal) => {quantity.value = newVal;});function decreaseQuantity() {if (quantity.value > 1) {quantity.value--;emit('update-quantity', quantity.value);}}function increaseQuantity() {if (quantity.value < props.stock) {quantity.value++;emit('update-quantity', quantity.value);}}function handleQuantityChange() {if (quantity.value < 1) {quantity.value = 1;} else if (quantity.value > props.stock) {quantity.value = props.stock;}emit('update-quantity', quantity.value);}function handleAddToCart() {emit('add-to-cart');}function handleBuyNow() {emit('buy-now');}</script><style scoped>.purchase-section {display: flex;align-items: center;gap: 20px;padding: 20px;background-color: #f8f9fa;border-top: 1px solid #e5e7eb;position: sticky;bottom: 0;z-index: 90;}.quantity-selector {display: flex;align-items: center;}.quantity-btn {width: 40px;height: 40px;border: 1px solid #ddd;background-color: #fff;cursor: pointer;font-size: 20px;}.quantity-btn:disabled {background-color: #f1f1f1;cursor: not-allowed;color: #999;}.quantity-input {width: 60px;height: 40px;text-align: center;border-top: 1px solid #ddd;border-bottom: 1px solid #ddd;border-left: none;border-right: none;padding: 0 10px;font-size: 16px;}.action-buttons {display: flex;gap: 15px;flex: 1;justify-content: flex-end;}.add-to-cart {width: 180px;height: 50px;font-size: 16px;}.buy-now {width: 180px;height: 50px;font-size: 16px;}@media (max-width: 768px) {.purchase-section {flex-direction: column;padding: 15px 10px;}.action-buttons {width: 100%;}.add-to-cart, .buy-now {width: 100%;}}</style>