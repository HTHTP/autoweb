<template><div class="add-to-cart-section"><div class="quantity-selector"><button class="quantity-btn minus" @click="decreaseQuantity":disabled="quantity <= 1"><i class="el-icon-minus"></i></button><input type="number" v-model.number="quantity" class="quantity-input"min="1":max="selectedSpec.stock"@change="validateQuantity"/><button class="quantity-btn plus" @click="increaseQuantity":disabled="quantity >= selectedSpec.stock"><i class="el-icon-plus"></i></button></div><div class="action-buttons"><button class="btn add-to-cart" @click="handleAddToCart"><i class="el-icon-shopping-cart-full"></i>加入购物车</button><button class="btn buy-now" @click="handleBuyNow"><i class="el-icon-bolt"></i>立即购买</button></div></div></template><script setup>import { defineProps, defineEmits, ref, watch } from 'vue'const props = defineProps({quantity: {type: Number,required: true},selectedSpec: {type: Object,required: true}})const emits = defineEmits(['update-quantity', 'add-to-cart', 'buy-now'])const localQuantity = ref(props.quantity)watch(() => props.quantity, (newVal) => {localQuantity.value = newVal})watch(() => props.selectedSpec, () => {if (localQuantity.value > props.selectedSpec.stock) {localQuantity.value = props.selectedSpec.stockemits('update-quantity', localQuantity.value)}})const decreaseQuantity = () => {if (localQuantity.value > 1) {localQuantity.value--emits('update-quantity', localQuantity.value)}}const increaseQuantity = () => {if (localQuantity.value < props.selectedSpec.stock) {localQuantity.value++emits('update-quantity', localQuantity.value)}}const validateQuantity = () => {if (isNaN(localQuantity.value) || localQuantity.value < 1) {localQuantity.value = 1} else if (localQuantity.value > props.selectedSpec.stock) {localQuantity.value = props.selectedSpec.stock}emits('update-quantity', localQuantity.value)}const handleAddToCart = () => {emits('add-to-cart')}const handleBuyNow = () => {emits('buy-now')}</script><style scoped>.add-to-cart-section {display: flex;align-items: center;gap: 20px;margin-top: 20px;}.quantity-selector {display: flex;align-items: center;}.quantity-btn {width: 36px;height: 36px;border: 1px solid #ddd;background-color: #f5f5f5;cursor: pointer;display: flex;align-items: center;justify-content: center;transition: all 0.2s;}.quantity-btn:disabled {opacity: 0.6;cursor: not-allowed;}.quantity-btn.minus {border-radius: 4px 0 0 4px;}.quantity-btn.plus {border-radius: 0 4px 4px 0;}.quantity-input {width: 60px;height: 36px;border-top: 1px solid #ddd;border-bottom: 1px solid #ddd;border-left: none;border-right: none;text-align: center;outline: none;}.action-buttons {display: flex;gap: 15px;}.btn {padding: 12px 30px;border-radius: 4px;border: none;font-size: 16px;cursor: pointer;display: flex;align-items: center;justify-content: center;gap: 8px;transition: all 0.2s;}.add-to-cart {background-color: #409eff;color: white;}.add-to-cart:hover {background-color: #337ecc;}.buy-now {background-color: #ff4d4f;color: white;}.buy-now:hover {background-color: #e03e40;}</style>