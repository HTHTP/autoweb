<template><div class="user-reviews"><div class="reviews-summary"><div class="average-rating"><div class="rating-value">{{ averageRating.toFixed(1) }}</div><div class="stars"><el-rate :value="averageRating" disabled size="large"></el-rate></div><div class="rating-count">基于 {{ reviews.length }} 条评价</div></div><div class="rating-distribution"><div v-for="i in 5" :key="i" class="rating-bar"><div class="bar-label">{{ i }}星</div><el-progress :percentage="getRatingPercentage(i)" :stroke-width="8"></el-progress><div class="bar-count">{{ getRatingCount(i) }}</div></div></div></div><div class="reviews-list"><div v-for="review in reviews" :key="review.id" class="review-item"><div class="review-header"><img :src="review.avatar" alt="用户头像" class="user-avatar" /><div class="user-info"><div class="user-name">{{ review.user }}</div><div class="review-date">{{ review.date }}</div></div><el-rate :value="review.rating" disabled size="small"></el-rate></div><div class="review-content">{{ review.content }}</div><div class="review-images" v-if="review.images && review.images.length > 0"><img v-for="(img, idx) in review.images" :key="idx" :src="img" alt="评价图片" class="review-image" /></div></div></div></div></template><script setup>import { defineProps, computed } from 'vue'const props = defineProps({reviews: {type: Array,required: true,default: () => []}})const averageRating = computed(() => {if (props.reviews.length === 0) return 0const sum = props.reviews.reduce((total, review) => total + review.rating, 0)return sum / props.reviews.length})const getRatingCount = (rating) => {return props.reviews.filter(review => review.rating === rating).length}const getRatingPercentage = (rating) => {if (props.reviews.length === 0) return 0return (getRatingCount(rating) / props.reviews.length) * 100}</script><style scoped>.user-reviews {padding: 20px;}.reviews-summary {display: flex;gap: 30px;margin-bottom: 30px;padding-bottom: 20px;border-bottom: 1px solid #eee;}.average-rating {flex: 1;text-align: center;}.rating-value {font-size: 48px;font-weight: bold;color: #ff9900;margin-bottom: 10px;}.stars {margin-bottom: 10px;}.rating-distribution {flex: 2;}.rating-bar {display: flex;align-items: center;margin-bottom: 10px;}.bar-label {width: 40px;}.el-progress {flex: 1;margin: 0 10px;}.bar-count {width: 40px;text-align: right;}.reviews-list {margin-top: 20px;}.review-item {padding: 20px 0;border-bottom: 1px solid #eee;}.review-header {display: flex;align-items: center;margin-bottom: 15px;}.user-avatar {width: 50px;height: 50px;border-radius: 50%;margin-right: 15px;}.user-info {flex: 1;}.user-name {font-weight: 500;margin-bottom: 5px;}.review-date {color: #999;font-size: 12px;}.review-content {line-height: 1.6;margin-bottom: 15px;}.review-images {display: flex;gap: 10px;}.review-image {width: 100px;height: 100px;object-fit: cover;border-radius: 4px;}</style>